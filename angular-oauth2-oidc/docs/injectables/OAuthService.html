<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>angular-oauth2-oidc</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	    <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">angular-oauth2-oidc</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
                <input type="text" placeholder="Type to search">
            </div>
            <nav>
            
                <ul class="list">
            
                    <li class="title">
                        <a href="../index.html">angular-oauth2-oidc</a>
                    </li>
            
                    <li class="divider"></li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../index.html"><span class="fa fa-home"></span>Getting started</a>
                        <ul class="links">
                                <li class="link">
                                    <a 
                                        
                                         href="../overview.html" 
                                         href="../overview.html" 
                                        >
                                        <span class="fa fa-th"></span>Overview
                                    </a>
                                </li>
                                <li class="link">
                                  <a href="../index.html" ><span class="fa fa-file-text-o"></span>README</a>
                                </li>
                                <li class="link">
                                    <a href="./license.html"
                                        >
                                        <span class="fa fa-file-text-o"></span>LICENSE
                                    </a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../modules.html" >
                            <div class="menu-toggler linked" data-toggle="collapse"
                                    data-target="#xs-modules-links"
                            >
                                <span class="fa fa-archive"></span>
                                <span class="link-name">Modules</span>
                                <span class="fa fa-angle-down"></span>
                            </div>
                        </a>
                        <ul class="links collapse "
                                id="xs-modules-links"
                            >
                                <li class="link">
                                    <a href="../modules/OAuthModule.html" >OAuthModule</a>
                                </li>
                        </ul>
                    </li>
            
            
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-classes-links"
                            >
                            <span class="fa fa-file-code-o"></span>
                            <span>Classes</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-classes-links"
                            >
                                <li class="link">
                                    <a href="../classes/AbstractValidationHandler.html" >AbstractValidationHandler</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/JwksValidationHandler.html" >JwksValidationHandler</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/LoginOptions.html" >LoginOptions</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/NullValidationHandler.html" >NullValidationHandler</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/OAuthErrorEvent.html" >OAuthErrorEvent</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/OAuthEvent.html" >OAuthEvent</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/OAuthInfoEvent.html" >OAuthInfoEvent</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/OAuthSuccessEvent.html" >OAuthSuccessEvent</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/ReceivedTokens.html" >ReceivedTokens</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-injectables-links"
                            >
                            <span class="fa fa-long-arrow-down"></span>
                            <span>Injectables</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-injectables-links"
                            >
                                <li class="link">
                                    <a href="../injectables/OAuthService.html"  data-type="entity-link" class="active" >OAuthService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/UrlHelperService.html" >UrlHelperService</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-interfaces-links"
                            >
                            <span class="fa fa-info"></span>
                            <span>Interfaces</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-interfaces-links"
                            >
                                <li class="link">
                                    <a href="../interfaces/OAuthStorage.html" >OAuthStorage</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/ParsedIdToken.html" >ParsedIdToken</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/ValidationHandler.html" >ValidationHandler</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/ValidationParams.html" >ValidationParams</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-miscellaneous-links"
                            >
                            <span class="fa fa-cubes"></span>
                            <span>Miscellaneous</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-miscellaneous-links"
                            >
                                <li class="link">
                                  <a href="../miscellaneous/typealiases.html" data-type="entity-link" >Type aliases</a>
                                </li>
                                <li class="link">
                                  <a href="../miscellaneous/variables.html" data-type="entity-link" >Variables</a>
                                </li>
                        </ul>
                    </li>
            
            
            
            
                </ul>
            
            </nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>
                   
                       <ul class="list">
                   
                           <li class="title">
                               <a href="../index.html">angular-oauth2-oidc</a>
                           </li>
                   
                           <li class="divider"></li>
                   
                               <div id="book-search-input" role="search">
                                   <input type="text" placeholder="Type to search">
                               </div>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../index.html"><span class="fa fa-home"></span>Getting started</a>
                               <ul class="links">
                                       <li class="link">
                                           <a 
                                               
                                                href="../overview.html" 
                                                href="../overview.html" 
                                               >
                                               <span class="fa fa-th"></span>Overview
                                           </a>
                                       </li>
                                       <li class="link">
                                         <a href="../index.html" ><span class="fa fa-file-text-o"></span>README</a>
                                       </li>
                                       <li class="link">
                                           <a href="./license.html"
                                               >
                                               <span class="fa fa-file-text-o"></span>LICENSE
                                           </a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../modules.html" >
                                   <div class="menu-toggler linked" data-toggle="collapse"
                                           data-target="#modules-links"
                                   >
                                       <span class="fa fa-archive"></span>
                                       <span class="link-name">Modules</span>
                                       <span class="fa fa-angle-down"></span>
                                   </div>
                               </a>
                               <ul class="links collapse "
                                       id="modules-links"
                   >
                                       <li class="link">
                                           <a href="../modules/OAuthModule.html" >OAuthModule</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#classes-links"
                   >
                                   <span class="fa fa-file-code-o"></span>
                                   <span>Classes</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="classes-links"
                   >
                                       <li class="link">
                                           <a href="../classes/AbstractValidationHandler.html" >AbstractValidationHandler</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/JwksValidationHandler.html" >JwksValidationHandler</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/LoginOptions.html" >LoginOptions</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/NullValidationHandler.html" >NullValidationHandler</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/OAuthErrorEvent.html" >OAuthErrorEvent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/OAuthEvent.html" >OAuthEvent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/OAuthInfoEvent.html" >OAuthInfoEvent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/OAuthSuccessEvent.html" >OAuthSuccessEvent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/ReceivedTokens.html" >ReceivedTokens</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#injectables-links"
                   >
                                   <span class="fa fa-long-arrow-down"></span>
                                   <span>Injectables</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="injectables-links"
                   >
                                       <li class="link">
                                           <a href="../injectables/OAuthService.html"  data-type="entity-link" class="active" >OAuthService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/UrlHelperService.html" >UrlHelperService</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#interfaces-links"
                   >
                                   <span class="fa fa-info"></span>
                                   <span>Interfaces</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="interfaces-links"
                   >
                                       <li class="link">
                                           <a href="../interfaces/OAuthStorage.html" >OAuthStorage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/ParsedIdToken.html" >ParsedIdToken</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/ValidationHandler.html" >ValidationHandler</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/ValidationParams.html" >ValidationParams</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#miscellaneous-links"
                   >
                                   <span class="fa fa-cubes"></span>
                                   <span>Miscellaneous</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="miscellaneous-links"
                   >
                                       <li class="link">
                                         <a href="../miscellaneous/typealiases.html" data-type="entity-link" >Type aliases</a>
                                       </li>
                                       <li class="link">
                                         <a href="../miscellaneous/variables.html" data-type="entity-link" >Variables</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                   
                   
                       </ul>
                   
                   </nav>
               </div>
               <div class="content injectable">
                   <div class="content-data">






<ol class="breadcrumb">
  <li>Injectables</li>
  <li>OAuthService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
    <li class="active">
        <a href="#info" id="info-tab" role="tab" data-toggle="tab" data-link="info">Info</a>
    </li>


    <li>
        <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/oauth-service.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Service for logging in and logging out with
OIDC and OAuth2. Supports implicit flow and
password flow.</p>

            </p>


            <section>
                <h3 id="index">Index</h3>
                <table class="table table-sm table-bordered index-table">
                    <tbody>
                        <tr>
                            <td class="col-md-4">
                                <h6><b>Properties</b></h6>
                            </td>
                        </tr>
                        <tr>
                            <td class="col-md-4">
                                <ul class="index-list">
                                    <li>
                                        <span class="modifier">Public</span> <a href="#clearHashAfterLogin">clearHashAfterLogin</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#clientId">clientId</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#customQueryParams">customQueryParams</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#dummyClientSecret">dummyClientSecret</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#events">events</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#issuer">issuer</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#jwks">jwks</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#loginUrl">loginUrl</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#logoutUrl">logoutUrl</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#oidc">oidc</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#options">options</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#postLogoutRedirectUri">postLogoutRedirectUri</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#redirectUri">redirectUri</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#requestAccessToken">requestAccessToken</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#requireHttps">requireHttps</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#resource">resource</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#responseType">responseType</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#rngUrl">rngUrl</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#scope">scope</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#showDebugInformation">showDebugInformation</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#silentRefreshIFrameName">silentRefreshIFrameName</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#silentRefreshMessagePrefix">silentRefreshMessagePrefix</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#silentRefreshRedirectUri">silentRefreshRedirectUri</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#siletRefreshTimeout">siletRefreshTimeout</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#state">state</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#strictDiscoveryDocumentValidation">strictDiscoveryDocumentValidation</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#timeoutFactor">timeoutFactor</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#tokenEndpoint">tokenEndpoint</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#tokenValidationHandler">tokenValidationHandler</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#userinfoEndpoint">userinfoEndpoint</a>
                                    </li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td class="col-md-4">
                                <h6><b>Methods</b></h6>
                            </td>
                        </tr>
                        <tr>
                            <td class="col-md-4">
                                <ul class="index-list">
                                    <li>
                                        <span class="modifier">Public</span> <a href="#authorizationHeader">authorizationHeader</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Protected</span> <a href="#createNonce">createNonce</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#fetchTokenUsingPasswordFlow">fetchTokenUsingPasswordFlow</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#fetchTokenUsingPasswordFlowAndLoadUserProfile">fetchTokenUsingPasswordFlowAndLoadUserProfile</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#getAccessToken">getAccessToken</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#getAccessTokenExpiration">getAccessTokenExpiration</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#getIdentityClaims">getIdentityClaims</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#getIdToken">getIdToken</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#getIdTokenExpiration">getIdTokenExpiration</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#hasValidAccessToken">hasValidAccessToken</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#hasValidIdToken">hasValidIdToken</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#initImplicitFlow">initImplicitFlow</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#loadDiscoveryDocument">loadDiscoveryDocument</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#loadUserProfile">loadUserProfile</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#logOut">logOut</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Protected</span> <a href="#processIdToken">processIdToken</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#refreshToken">refreshToken</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#setStorage">setStorage</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#silentRefresh">silentRefresh</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Protected</span> <a href="#storeIdToken">storeIdToken</a>
                                    </li>
                                    <li>
                                        <span class="modifier">Public</span> <a href="#tryLogin">tryLogin</a>
                                    </li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <section>
                <h3 id="constructor">Constructor</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <code>constructor(http: <a href="https://angular.io/docs/ts/latest/api/http/index/Http-class.html" target="_blank">Http</a>, urlHelper: <a href="../injectables/UrlHelperService.html">UrlHelperService</a>)</code>
                                </td>
                            </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="193" class="link-to-prism">src/oauth-service.ts:193</a></div>
                                        </td>
                                    </tr>
            
                        </tbody>
                    </table>
            </section>

            <section>
                
                    <h3 id="methods">
                        Methods
                    </h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="authorizationHeader"></a>
                                    <b><span class="modifier">Public</span> authorizationHeader</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>authorizationHeader()</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="1133" class="link-to-prism">src/oauth-service.ts:1133</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Returns the auth-header that can be used
            to transmit the access_token to a service</p>
            </div>
            
                                        <div class="io-description">
                                            <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="createNonce"></a>
                                    <b><span class="modifier">Protected</span> createNonce</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play circle"></span>
                                    <code>createNonce()</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="1182" class="link-to-prism">src/oauth-service.ts:1182</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
            
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;string&gt;</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="fetchTokenUsingPasswordFlow"></a>
                                    <b><span class="modifier">Public</span> fetchTokenUsingPasswordFlow</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>fetchTokenUsingPasswordFlow(userName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, password: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, headers: <a href="../s/rs.html">Headers</a>)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="522" class="link-to-prism">src/oauth-service.ts:522</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Uses password flow to exchange userName and password for an access_token.</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <table class="params">
                                                    <thead>
                                                        <tr>
                                                            <td>Name</td>
                                                            <td>Type</td>
                                                            <td>Description</td>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                            <tr>
                                                              <td>userName</td>
                                                              <td>
                                                              </td>
                                                              <td></td>
                                                            </tr>
                                                            <tr>
                                                              <td>password</td>
                                                              <td>
                                                              </td>
                                                              <td></td>
                                                            </tr>
                                                            <tr>
                                                              <td>headers</td>
                                                              <td>
                                                              </td>
                                                              <td><p>Optional additional http-headers.</p>
            </td>
                                                            </tr>
                                                    </tbody>
                                                </table>
                                        </div>
                                        <div>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;object&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="fetchTokenUsingPasswordFlowAndLoadUserProfile"></a>
                                    <b><span class="modifier">Public</span> fetchTokenUsingPasswordFlowAndLoadUserProfile</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>fetchTokenUsingPasswordFlowAndLoadUserProfile(userName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, password: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, headers: <a href="../s/rs.html">Headers</a>)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="464" class="link-to-prism">src/oauth-service.ts:464</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Uses password flow to exchange userName and password for an
            access_token. After receiving the access_token, this method
            uses it to query the userinfo endpoint in order to get information
            about the user in question.</p>
            <p>When using this, make sure that the property oidc is set to false.
            Otherwise stricter validations take happen that makes this operation
            fail.</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <table class="params">
                                                    <thead>
                                                        <tr>
                                                            <td>Name</td>
                                                            <td>Type</td>
                                                            <td>Description</td>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                            <tr>
                                                              <td>userName</td>
                                                              <td>
                                                              </td>
                                                              <td></td>
                                                            </tr>
                                                            <tr>
                                                              <td>password</td>
                                                              <td>
                                                              </td>
                                                              <td></td>
                                                            </tr>
                                                            <tr>
                                                              <td>headers</td>
                                                              <td>
                                                              </td>
                                                              <td><p>Optional additional http-headers.</p>
            </td>
                                                            </tr>
                                                    </tbody>
                                                </table>
                                        </div>
                                        <div>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;object&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="getAccessToken"></a>
                                    <b><span class="modifier">Public</span> getAccessToken</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>getAccessToken()</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="1073" class="link-to-prism">src/oauth-service.ts:1073</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Returns the current access_token.</p>
            </div>
            
                                        <div class="io-description">
                                            <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="getAccessTokenExpiration"></a>
                                    <b><span class="modifier">Public</span> getAccessTokenExpiration</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>getAccessTokenExpiration()</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="1081" class="link-to-prism">src/oauth-service.ts:1081</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Returns the expiration date of the access_token
            as milliseconds since 1970.</p>
            </div>
            
                                        <div class="io-description">
                                            <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="getIdentityClaims"></a>
                                    <b><span class="modifier">Public</span> getIdentityClaims</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>getIdentityClaims()</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="1050" class="link-to-prism">src/oauth-service.ts:1050</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Returns the received claims about the user.</p>
            </div>
            
                                        <div class="io-description">
                                            <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/object" target="_blank" >object</a></code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="getIdToken"></a>
                                    <b><span class="modifier">Public</span> getIdToken</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>getIdToken()</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="1059" class="link-to-prism">src/oauth-service.ts:1059</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Returns the current id_token.</p>
            </div>
            
                                        <div class="io-description">
                                            <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="getIdTokenExpiration"></a>
                                    <b><span class="modifier">Public</span> getIdTokenExpiration</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>getIdTokenExpiration()</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="1089" class="link-to-prism">src/oauth-service.ts:1089</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Returns the expiration date of the id_token
            as milliseconds since 1970.</p>
            </div>
            
                                        <div class="io-description">
                                            <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="hasValidAccessToken"></a>
                                    <b><span class="modifier">Public</span> hasValidAccessToken</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>hasValidAccessToken()</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="1096" class="link-to-prism">src/oauth-service.ts:1096</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Checkes, whether there is a valid access_token.</p>
            </div>
            
                                        <div class="io-description">
                                            <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="hasValidIdToken"></a>
                                    <b><span class="modifier">Public</span> hasValidIdToken</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>hasValidIdToken()</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="1114" class="link-to-prism">src/oauth-service.ts:1114</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Checkes, whether there is a valid id_token.</p>
            </div>
            
                                        <div class="io-description">
                                            <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="initImplicitFlow"></a>
                                    <b><span class="modifier">Public</span> initImplicitFlow</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>initImplicitFlow(additionalState: , loginHint: )</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="784" class="link-to-prism">src/oauth-service.ts:784</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Starts the implicit flow and redirects to user to
            the auth servers login url. </p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <table class="params">
                                                    <thead>
                                                        <tr>
                                                            <td>Name</td>
                                                            <td>Type</td>
                                                            <td>Description</td>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                            <tr>
                                                              <td>additionalState</td>
                                                              <td>
                                                              </td>
                                                              <td><p>Optinal state that is passes around. You find this state in the property <code>state</code> after <code>tryLogin</code> logged in the user.</p>
            </td>
                                                            </tr>
                                                            <tr>
                                                              <td>loginHint</td>
                                                              <td>
                                                              </td>
                                                              <td></td>
                                                            </tr>
                                                    </tbody>
                                                </table>
                                        </div>
                                        <div>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="loadDiscoveryDocument"></a>
                                    <b><span class="modifier">Public</span> loadDiscoveryDocument</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>loadDiscoveryDocument(fullUrl: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="345" class="link-to-prism">src/oauth-service.ts:345</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Loads the discovery document to configure most
            properties of this service. The url of the discovery
            document is infered from the issuer&#39;s url according
            to the OpenId Connect spec. To use another url you
            can pass it to to optional parameter fullUrl.</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <table class="params">
                                                    <thead>
                                                        <tr>
                                                            <td>Name</td>
                                                            <td>Type</td>
                                                            <td>Description</td>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                            <tr>
                                                              <td>fullUrl</td>
                                                              <td>
                                                              </td>
                                                              <td></td>
                                                            </tr>
                                                    </tbody>
                                                </table>
                                        </div>
                                        <div>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;object&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="loadUserProfile"></a>
                                    <b><span class="modifier">Public</span> loadUserProfile</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>loadUserProfile()</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="477" class="link-to-prism">src/oauth-service.ts:477</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Loads the user profile by accessing the user info endpoint defined by OpenId Connect.</p>
            <p>When using this with OAuth2 password flow, make sure that the property oidc is set to false.
            Otherwise stricter validations take happen that makes this operation
            fail.</p>
            </div>
            
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;object&gt;</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="logOut"></a>
                                    <b><span class="modifier">Public</span> logOut</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>logOut(noRedirectToLogoutUrl: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="1143" class="link-to-prism">src/oauth-service.ts:1143</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Removes all tokens and logs the user out.
            If a logout url is configured, the user is 
            redirected to it.</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <table class="params">
                                                    <thead>
                                                        <tr>
                                                            <td>Name</td>
                                                            <td>Type</td>
                                                            <td>Description</td>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                            <tr>
                                                              <td>noRedirectToLogoutUrl</td>
                                                              <td>
                                                              </td>
                                                              <td></td>
                                                            </tr>
                                                    </tbody>
                                                </table>
                                        </div>
                                        <div>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="processIdToken"></a>
                                    <b><span class="modifier">Protected</span> processIdToken</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play circle"></span>
                                    <code>processIdToken(idToken: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, accessToken: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="948" class="link-to-prism">src/oauth-service.ts:948</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
            
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;&gt;</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="refreshToken"></a>
                                    <b><span class="modifier">Public</span> refreshToken</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>refreshToken()</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="567" class="link-to-prism">src/oauth-service.ts:567</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Refreshes the token using a refresh_token.
            This does not work for implicit flow, b/c
            there is no refresh_token in this flow.
            A solution for this is provided by the
            method silentRefresh.</p>
            </div>
            
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;object&gt;</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="setStorage"></a>
                                    <b><span class="modifier">Public</span> setStorage</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>setStorage(storage: <a href="../interfaces/OAuthStorage.html">OAuthStorage</a>)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="332" class="link-to-prism">src/oauth-service.ts:332</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Sets a custom storage used to store the received
            tokens on client side. By default, the browser&#39;s
            sessionStorage is used.</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <table class="params">
                                                    <thead>
                                                        <tr>
                                                            <td>Name</td>
                                                            <td>Type</td>
                                                            <td>Description</td>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                            <tr>
                                                              <td>storage</td>
                                                              <td>
                                                              </td>
                                                              <td></td>
                                                            </tr>
                                                    </tbody>
                                                </table>
                                        </div>
                                        <div>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="silentRefresh"></a>
                                    <b><span class="modifier">Public</span> silentRefresh</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>silentRefresh()</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="651" class="link-to-prism">src/oauth-service.ts:651</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Performs a silent refresh for implicit flow.
            Use this method to get a new tokens when/ before 
            the existing tokens expires.</p>
            </div>
            
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;&gt;</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="storeIdToken"></a>
                                    <b><span class="modifier">Protected</span> storeIdToken</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play circle"></span>
                                    <code>storeIdToken(idToken: <a href="../interfaces/ParsedIdToken.html">ParsedIdToken</a>)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="934" class="link-to-prism">src/oauth-service.ts:934</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
            
                                        <div class="io-description">
                                            <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="tryLogin"></a>
                                    <b><span class="modifier">Public</span> tryLogin</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                        <span class="modifier-icon method fa fa-play "></span>
                                    <code>tryLogin(options: <a href="../classes/LoginOptions.html">LoginOptions</a>)</code>
                                </td>
                            </tr>
            
            
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="837" class="link-to-prism">src/oauth-service.ts:837</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Checks whether there are tokens in the hash fragment
            as a result of the implicit flow. These tokens are
            parsed, validated and used to sign the user in to the
            current client.</p>
            </div>
            
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <table class="params">
                                                    <thead>
                                                        <tr>
                                                            <td>Name</td>
                                                            <td>Type</td>
                                                            <td>Description</td>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                            <tr>
                                                              <td>options</td>
                                                              <td>
                                                              </td>
                                                              <td><p>Optinal options.</p>
            </td>
                                                            </tr>
                                                    </tbody>
                                                </table>
                                        </div>
                                        <div>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
            </section>

            <section>
                
                    <h3 id="inputs">
                        Properties
                    </h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="clearHashAfterLogin"></a>
                                    <b><span class="modifier">Public</span> clearHashAfterLogin</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>clearHashAfterLogin:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
            
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Default value : </i><code>true</code>
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="82" class="link-to-prism">src/oauth-service.ts:82</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>Defines whether to clear the hash fragment after logging in.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="clientId"></a>
                                    <b><span class="modifier">Public</span> clientId</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>clientId:     <code></code>
            </code>
                                </td>
                            </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="23" class="link-to-prism">src/oauth-service.ts:23</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>The client&#39;s id as registered with the auth server</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="customQueryParams"></a>
                                    <b><span class="modifier">Public</span> customQueryParams</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>customQueryParams:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/object" target="_blank" >object</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/object" target="_blank" >object</a></code>
            
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="155" class="link-to-prism">src/oauth-service.ts:155</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>Map with additional query parameter that are appended to
            the request when initializing implicit flow.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="dummyClientSecret"></a>
                                    <b><span class="modifier">Public</span> dummyClientSecret</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>dummyClientSecret:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
            
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="122" class="link-to-prism">src/oauth-service.ts:122</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>Some auth servers don&#39;t allow using password flow
            w/o a client secreat while the standards do not
            demand for it. In this case, you can set a password
            here. As this passwort is exposed to the public
            it does not bring additional security and is therefore
            as good as using no password.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="events"></a>
                                    <b><span class="modifier">Public</span> events</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>events:     <code><a href="../classes/OAuthEvent.html" target="_self" >Observable&lt;OAuthEvent&gt;</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="../classes/OAuthEvent.html" target="_self" >Observable&lt;OAuthEvent&gt;</a></code>
            
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="176" class="link-to-prism">src/oauth-service.ts:176</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>Informs about events, like token_received or token_expires.
            See the string enum EventType for a full list of events.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="issuer"></a>
                                    <b><span class="modifier">Public</span> issuer</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>issuer:     <code></code>
            </code>
                                </td>
                            </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="72" class="link-to-prism">src/oauth-service.ts:72</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>The issuer&#39;s uri.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="jwks"></a>
                                    <b><span class="modifier">Public</span> jwks</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>jwks:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/object" target="_blank" >object</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/object" target="_blank" >object</a></code>
            
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="149" class="link-to-prism">src/oauth-service.ts:149</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>JSON Web Key Set (<a href="https://tools.ietf.org/html/rfc7517">https://tools.ietf.org/html/rfc7517</a>)
            with keys used to validate received id_tokens.
            This is taken out of the disovery document. Can be set manually too.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="loginUrl"></a>
                                    <b><span class="modifier">Public</span> loginUrl</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>loginUrl:     <code></code>
            </code>
                                </td>
                            </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="40" class="link-to-prism">src/oauth-service.ts:40</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>The auth server&#39;s endpoint that allows to log
            the user in when using implicit flow.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="logoutUrl"></a>
                                    <b><span class="modifier">Public</span> logoutUrl</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>logoutUrl:     <code></code>
            </code>
                                </td>
                            </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="77" class="link-to-prism">src/oauth-service.ts:77</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>The logout url.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="oidc"></a>
                                    <b><span class="modifier">Public</span> oidc</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>oidc:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
            
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Default value : </i><code>true</code>
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="54" class="link-to-prism">src/oauth-service.ts:54</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>Defines whether to use OpenId Connect during
            implicit flow.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="options"></a>
                                    <b><span class="modifier">Public</span> options</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>options:     <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
            
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="61" class="link-to-prism">src/oauth-service.ts:61</a></div>
                                        </td>
                                    </tr>
            
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="postLogoutRedirectUri"></a>
                                    <b><span class="modifier">Public</span> postLogoutRedirectUri</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>postLogoutRedirectUri:     <code></code>
            </code>
                                </td>
                            </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="34" class="link-to-prism">src/oauth-service.ts:34</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>An optional second redirectUri where the auth server
            redirects the user to after logging out.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="redirectUri"></a>
                                    <b><span class="modifier">Public</span> redirectUri</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>redirectUri:     <code></code>
            </code>
                                </td>
                            </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="28" class="link-to-prism">src/oauth-service.ts:28</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>The client&#39;s redirectUri as registered with the auth server</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="requestAccessToken"></a>
                                    <b><span class="modifier">Public</span> requestAccessToken</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>requestAccessToken:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
            
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Default value : </i><code>true</code>
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="60" class="link-to-prism">src/oauth-service.ts:60</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>Defines whether to request a access token during
            implicit flow.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="requireHttps"></a>
                                    <b><span class="modifier">Public</span> requireHttps</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>requireHttps:     <code>boolean|</code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code>boolean|</code>
            
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Default value : </i><code>remoteOnly</code>
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="136" class="link-to-prism">src/oauth-service.ts:136</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>Defines whether https is required.
            The default value is remoteOnly which only allows
            http for location, while every other domains need
            to be used with https.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="resource"></a>
                                    <b><span class="modifier">Public</span> resource</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>resource:     <code></code>
            </code>
                                </td>
                            </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="47" class="link-to-prism">src/oauth-service.ts:47</a></div>
                                        </td>
                                    </tr>
            
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="responseType"></a>
                                    <b><span class="modifier">Public</span> responseType</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>responseType:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
            
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Default value : </i><code>token</code>
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="94" class="link-to-prism">src/oauth-service.ts:94</a></div>
                                        </td>
                                    </tr>
            
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="rngUrl"></a>
                                    <b><span class="modifier">Public</span> rngUrl</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>rngUrl:     <code></code>
            </code>
                                </td>
                            </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="48" class="link-to-prism">src/oauth-service.ts:48</a></div>
                                        </td>
                                    </tr>
            
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="scope"></a>
                                    <b><span class="modifier">Public</span> scope</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>scope:     <code></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Default value : </i><code>openid profile</code>
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="45" class="link-to-prism">src/oauth-service.ts:45</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>The requested scopes</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="showDebugInformation"></a>
                                    <b><span class="modifier">Public</span> showDebugInformation</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>showDebugInformation:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
            
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Default value : </i><code>false</code>
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="100" class="link-to-prism">src/oauth-service.ts:100</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>Defines whether additional debug information should 
            be shown at the console.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="silentRefreshIFrameName"></a>
                                    <b><span class="modifier">Public</span> silentRefreshIFrameName</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>silentRefreshIFrameName:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
            
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Default value : </i><code>angular-oauth-oidc-silent-refresh-iframe</code>
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="179" class="link-to-prism">src/oauth-service.ts:179</a></div>
                                        </td>
                                    </tr>
            
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="silentRefreshMessagePrefix"></a>
                                    <b><span class="modifier">Public</span> silentRefreshMessagePrefix</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>silentRefreshMessagePrefix:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
            
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="107" class="link-to-prism">src/oauth-service.ts:107</a></div>
                                        </td>
                                    </tr>
            
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="silentRefreshRedirectUri"></a>
                                    <b><span class="modifier">Public</span> silentRefreshRedirectUri</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>silentRefreshRedirectUri:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
            
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="105" class="link-to-prism">src/oauth-service.ts:105</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>The redirect uri used when doing silent refresh.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="siletRefreshTimeout"></a>
                                    <b><span class="modifier">Public</span> siletRefreshTimeout</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>siletRefreshTimeout:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
            
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="112" class="link-to-prism">src/oauth-service.ts:112</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>Timeout for silent refresh. </p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="state"></a>
                                    <b><span class="modifier">Public</span> state</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>state:     <code></code>
            </code>
                                </td>
                            </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="67" class="link-to-prism">src/oauth-service.ts:67</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>The received (passed around) state, when logging
            in with implicit flow.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="strictDiscoveryDocumentValidation"></a>
                                    <b><span class="modifier">Public</span> strictDiscoveryDocumentValidation</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>strictDiscoveryDocumentValidation:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
            
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Default value : </i><code>true</code>
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="142" class="link-to-prism">src/oauth-service.ts:142</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>Defines whether every url provided by the discovery 
            document has to start with the issuer&#39;s url.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="timeoutFactor"></a>
                                    <b><span class="modifier">Public</span> timeoutFactor</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>timeoutFactor:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
            
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Default value : </i><code>0.75</code>
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="190" class="link-to-prism">src/oauth-service.ts:190</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>Defines when the token_timeout event should be raised.
            If you set this to the default value 0.75, the event
            is triggered after 75% of the token&#39;s life time.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="tokenEndpoint"></a>
                                    <b><span class="modifier">Public</span> tokenEndpoint</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>tokenEndpoint:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
            
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="87" class="link-to-prism">src/oauth-service.ts:87</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>Url of the token endpoint as defined by OpenId Connect and OAuth 2.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="tokenValidationHandler"></a>
                                    <b><span class="modifier">Public</span> tokenValidationHandler</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>tokenValidationHandler:     <code><a href="../interfaces/ValidationHandler.html" target="_self" >ValidationHandler</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="../interfaces/ValidationHandler.html" target="_self" >ValidationHandler</a></code>
            
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="128" class="link-to-prism">src/oauth-service.ts:128</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>The ValidationHandler used to validate received
            id_tokens.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <a name="userinfoEndpoint"></a>
                                    <b><span class="modifier">Public</span> userinfoEndpoint</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-"></span><code>userinfoEndpoint:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
            </code>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
            
                                    </td>
                                </tr>
                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="92" class="link-to-prism">src/oauth-service.ts:92</a></div>
                                        </td>
                                    </tr>
            
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>Url of the userinfo endpoint as defined by OpenId Connect.</p>
            </div>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade tab-source-code" id="source">
        <pre class="line-numbers"><code class="language-typescript">import { Http, URLSearchParams, Headers } from &#x27;@angular/http&#x27;;
import { Injectable } from &#x27;@angular/core&#x27;;
import { Observable } from &#x27;rxjs/Observable&#x27;;
import { Subject } from &#x27;rxjs/Subject&#x27;;
import { ValidationHandler, ValidationParams } from &quot;./token-validation/validation-handler&quot;;
import { NullValidationHandler } from &quot;./token-validation/null-validation-handler&quot;;
import { UrlHelperService } from &quot;./url-helper.service&quot;;
import { Subscription } from &quot;rxjs/Subscription&quot;;
import { OAuthEvent, OAuthInfoEvent, OAuthErrorEvent, OAuthSuccessEvent } from &quot;./events&quot;;
import { OAuthStorage, LoginOptions, ParsedIdToken } from &quot;./types&quot;;

/**
 * Service for logging in and logging out with
 * OIDC and OAuth2. Supports implicit flow and
 * password flow.
 */
@Injectable()
export class OAuthService {

    /**
     * The client&#x27;s id as registered with the auth server
     */
    public clientId &#x3D; &quot;&quot;;

    /**
     * The client&#x27;s redirectUri as registered with the auth server
     */
    public redirectUri &#x3D; &quot;&quot;;

    /**
     * An optional second redirectUri where the auth server
     * redirects the user to after logging out.
     */
    public postLogoutRedirectUri &#x3D; &quot;&quot;;

    /**
     * The auth server&#x27;s endpoint that allows to log
     * the user in when using implicit flow.
     */
    public loginUrl &#x3D; &quot;&quot;;

    /**
     * The requested scopes
     */
    public scope &#x3D; &quot;openid profile&quot;;

    public resource &#x3D; &quot;&quot;;
    public rngUrl &#x3D; &quot;&quot;;

    /**
     * Defines whether to use OpenId Connect during
     * implicit flow.
     */
    public oidc: boolean &#x3D; true;

    /**
     * Defines whether to request a access token during
     * implicit flow.
     */
    public requestAccessToken: boolean &#x3D; true;
    public options: any;
    
    /**
     * The received (passed around) state, when logging
     * in with implicit flow.
     */
    public state &#x3D; &quot;&quot;;

    /**
     * The issuer&#x27;s uri.
     */
    public issuer &#x3D; &quot;&quot;;

    /**
     * The logout url.
     */
    public logoutUrl &#x3D; &quot;&quot;;

    /**
     * Defines whether to clear the hash fragment after logging in.
     */
    public clearHashAfterLogin: boolean &#x3D; true;

    /**
     * Url of the token endpoint as defined by OpenId Connect and OAuth 2.
     */
    public tokenEndpoint: string;

    /**
     * Url of the userinfo endpoint as defined by OpenId Connect.
     */
    public userinfoEndpoint: string;

    public responseType: string &#x3D; &quot;token&quot;;

    /**
     * Defines whether additional debug information should 
     * be shown at the console.
     */
    public showDebugInformation: boolean &#x3D; false;

    /**
     * The redirect uri used when doing silent refresh.
     */
    public silentRefreshRedirectUri: string &#x3D; &#x27;&#x27;;

    public silentRefreshMessagePrefix: string &#x3D; &#x27;&#x27;;

    /**
     * Timeout for silent refresh. 
     */
    public siletRefreshTimeout: number &#x3D; 1000 * 20; 

    /**
     * Some auth servers don&#x27;t allow using password flow
     * w/o a client secreat while the standards do not
     * demand for it. In this case, you can set a password
     * here. As this passwort is exposed to the public
     * it does not bring additional security and is therefore
     * as good as using no password.
     */
    public dummyClientSecret: string;

    /**
     * The ValidationHandler used to validate received
     * id_tokens.
     */
    public tokenValidationHandler: ValidationHandler;

    /**
     * Defines whether https is required.
     * The default value is remoteOnly which only allows
     * http for location, while every other domains need
     * to be used with https.
     */
    public requireHttps: boolean | &#x27;remoteOnly&#x27; &#x3D; &#x27;remoteOnly&#x27;;
    
    /**
     * Defines whether every url provided by the discovery 
     * document has to start with the issuer&#x27;s url.
     */
    public strictDiscoveryDocumentValidation: boolean &#x3D; true;

    /**
     * JSON Web Key Set (https://tools.ietf.org/html/rfc7517)
     * with keys used to validate received id_tokens.
     * This is taken out of the disovery document. Can be set manually too.
     */
    public jwks: object;

    /**
     * Map with additional query parameter that are appended to
     * the request when initializing implicit flow.
     */
    public customQueryParams: object;

    /**
     * @internal
     * Deprecated:  use property events instead
     */
    
    public discoveryDocumentLoaded: boolean &#x3D; false;
  
    /**
     * @internal
     * Deprecated:  use property events instead
     */
    public discoveryDocumentLoaded$: Observable&lt;object&gt;;
    
    private discoveryDocumentLoadedSubject: Subject&lt;object&gt; &#x3D; new Subject&lt;object&gt;();

    /**
     * Informs about events, like token_received or token_expires.
     * See the string enum EventType for a full list of events.
     */
    public events: Observable&lt;OAuthEvent&gt;;
    private eventsSubject: Subject&lt;OAuthEvent&gt; &#x3D; new Subject&lt;OAuthEvent&gt;();

    public silentRefreshIFrameName: string &#x3D; &#x27;angular-oauth-oidc-silent-refresh-iframe&#x27;;
    private silentRefreshPostMessageEventListener: EventListener;

    private grantTypesSupported: Array&lt;string&gt; &#x3D; [];
    private _storage: OAuthStorage;

    /**
     * Defines when the token_timeout event should be raised.
     * If you set this to the default value 0.75, the event
     * is triggered after 75% of the token&#x27;s life time.
     */
    public timeoutFactor: number &#x3D; 0.75;

    private accessTokenTimeoutSubscription: Subscription;
    private idTokenTimeoutSubscription: Subscription;

    constructor(
        private http: Http,
        private urlHelper: UrlHelperService) {
     
        this.discoveryDocumentLoaded$ &#x3D; this.discoveryDocumentLoadedSubject.asObservable();
        this.events &#x3D; this.eventsSubject.asObservable();

        if (sessionStorage) {
            this._storage &#x3D; sessionStorage;
        }

        this.setupTimer();
    }

    private getKeyCount(): number {
        if (!this.jwks) return 0;
        if (!this.jwks[&#x27;keys&#x27;]) return 0;
        return this.jwks[&#x27;keys&#x27;].length;
    }


    private debug(...args): void {
        if (this.showDebugInformation) {
            console.debug.apply(console, args);
        }
    }

    private validateUrlFromDiscoveryDocument(url: string): string[] {

        let errors: string[] &#x3D; [];
        let httpsCheck &#x3D; this.validateUrlForHttps(url);
        let issuerCheck &#x3D; this.validateUrlAgainstIssuer(url);

        if (!httpsCheck) {
            errors.push(&#x27;https for all urls required. Also for urls received by discovery.&#x27;);
        }

        if (!issuerCheck) {
            errors.push(&#x27;Every url in discovery document has to start with the issuer url. Also see property strictDiscoveryDocumentValidation.&#x27;);
        }

        return errors;
    }

    private validateUrlForHttps(url: string): boolean {
        let lcUrl &#x3D; url.toLowerCase();
        
        if (this.requireHttps &#x3D;&#x3D; false) return true;

        if ((lcUrl.match(/^http:\/\/localhost($|[:\/])/) 
            || lcUrl.match(/^http:\/\/localhost($|[:\/])/))
            &amp;&amp; this.requireHttps &#x3D;&#x3D; &#x27;remoteOnly&#x27;) {
                return true;
        }

        return lcUrl.startsWith(&#x27;https://&#x27;);
    }

    private validateUrlAgainstIssuer(url: string) {
        if (!this.strictDiscoveryDocumentValidation) return true;
        return url.toLowerCase().startsWith(this.issuer.toLowerCase());
    }

    private setupTimer(): void {
        
        if (!window) {
            this.debug(&#x27;timer not supported on this plattform&#x27;)
            return;
        } 

        this.events.filter(e &#x3D;&gt; e.type &#x3D;&#x3D; &#x27;token_received&#x27;).subscribe(_ &#x3D;&gt; {
            
            this.clearAccessTokenTimer();
            this.clearIdTokenTimer();

            let now &#x3D; Date.now();

            if (this.hasValidAccessToken()) {
                this.setupAccessTokenTimer();
            }

            if (this.hasValidIdToken()) {
                this.setupIdTokenTimer();
            }

        });
    }

    private setupAccessTokenTimer(): void {
        let expiration &#x3D; this.getAccessTokenExpiration();
        let timeout &#x3D; this.calcTimeout(expiration);
        
        this.accessTokenTimeoutSubscription &#x3D; 
            Observable
                .of(new OAuthInfoEvent(&#x27;token_expires&#x27;, &#x27;access_token&#x27;))
                .delay(timeout)
                .subscribe(e &#x3D;&gt; this.eventsSubject.next(e));
    }


    private setupIdTokenTimer(): void {
        let expiration &#x3D; this.getAccessTokenExpiration();
        let timeout &#x3D; this.calcTimeout(expiration);
        
        this.accessTokenTimeoutSubscription &#x3D; 
            Observable
                .of(new OAuthInfoEvent(&#x27;token_expires&#x27;, &#x27;id_token&#x27;))
                .delay(timeout)
                .subscribe(this.eventsSubject);
    }

    private clearAccessTokenTimer(): void {
        if (this.accessTokenTimeoutSubscription) {
            this.accessTokenTimeoutSubscription.unsubscribe();
        }
    }

    private clearIdTokenTimer(): void {
        if (this.idTokenTimeoutSubscription) {
            this.idTokenTimeoutSubscription.unsubscribe();
        }
    }

    private calcTimeout(expiration: number): number {
        let now &#x3D; Date.now();
        let delta &#x3D; (expiration - now) * this.timeoutFactor;
        let timeout &#x3D; now + delta;
        return timeout;
    }

    /**
     * Sets a custom storage used to store the received
     * tokens on client side. By default, the browser&#x27;s
     * sessionStorage is used.
     * 
     * @param storage 
     */
    public setStorage(storage: OAuthStorage): void {
        this._storage &#x3D; storage;
    }

    /**
     * Loads the discovery document to configure most
     * properties of this service. The url of the discovery
     * document is infered from the issuer&#x27;s url according
     * to the OpenId Connect spec. To use another url you
     * can pass it to to optional parameter fullUrl.
     * 
     * @param fullUrl 
     */
    public loadDiscoveryDocument(fullUrl: string &#x3D; null): Promise&lt;object&gt; {

        return new Promise((resolve, reject) &#x3D;&gt; {

            if (!fullUrl) {
                fullUrl &#x3D; this.issuer + &#x27;/.well-known/openid-configuration&#x27;;
            }

            if (!this.validateUrlForHttps(fullUrl)) {
                reject(&#x27;loginUrl must use Http. Also check property requireHttps.&#x27;);
                return;
            }
    
            this.http.get(fullUrl).map(r &#x3D;&gt; r.json()).subscribe(
                (doc) &#x3D;&gt; {

                    if (!this.validateDiscoveryDocument(doc)) {
                        this.eventsSubject.next(new OAuthErrorEvent(&#x27;discovery_document_validation_error&#x27;, null));
                        reject(&#x27;discovery_document_validation_error&#x27;);
                        return;
                    }

                    this.loginUrl &#x3D; doc.authorization_endpoint;
                    this.logoutUrl &#x3D; doc.end_session_endpoint;
                    this.grantTypesSupported &#x3D; doc.grant_types_supported;
                    this.issuer &#x3D; doc.issuer;
                    this.tokenEndpoint &#x3D; doc.token_endpoint;
                    this.userinfoEndpoint &#x3D; doc.userinfo_endpoint;

                    this.discoveryDocumentLoaded &#x3D; true;
                    this.discoveryDocumentLoadedSubject.next(doc);

                    if (doc.jwks_uri) {
                        this.http.get(doc.jwks_uri).map(r &#x3D;&gt; r.json()).subscribe(
                            jwks &#x3D;&gt; {
                                this.jwks &#x3D; jwks;
                                this.eventsSubject.next(new OAuthSuccessEvent(&#x27;discovery_document_loaded&#x27;));
                                resolve(doc);
                            },
                            err &#x3D;&gt; {
                                console.error(&#x27;error loading jwks&#x27;, err);
                                this.eventsSubject.next(new OAuthErrorEvent(&#x27;jwks_load_error&#x27;, err));
                                reject(err);
                            }
                        )
                    }
                    else {
                        this.eventsSubject.next(new OAuthSuccessEvent(&#x27;discovery_document_loaded&#x27;));
                        resolve(doc);
                    }
                },
                (err) &#x3D;&gt; {
                    console.error(&#x27;error loading dicovery document&#x27;, err);
                    this.eventsSubject.next(new OAuthErrorEvent(&#x27;discovery_document_load_error&#x27;, err));
                    reject(err);
                }
            );
        });
    }

    private validateDiscoveryDocument(doc: object): boolean {

        let errors: string[];

        if (doc[&#x27;issuer&#x27;] !&#x3D; this.issuer) {
            console.error(
                &#x27;invalid issuer in discovery document&#x27;,
                &#x27;expected: &#x27; + this.issuer,
                &#x27;current: &#x27; + doc[&#x27;issuer&#x27;]
            );
            return false;
        }

        errors &#x3D; this.validateUrlFromDiscoveryDocument(doc[&#x27;authorization_endpoint&#x27;]);
        if (errors.length &gt; 0) {
            console.error(&#x27;error validating authorization_endpoint in discovery document&#x27;, errors);
            return false;
        }

        errors &#x3D; this.validateUrlFromDiscoveryDocument(doc[&#x27;end_session_endpoint&#x27;]);
        if (errors.length &gt; 0) {
            console.error(&#x27;error validating end_session_endpoint in discovery document&#x27;, errors);
            return false;
        }

        errors &#x3D; this.validateUrlFromDiscoveryDocument(doc[&#x27;token_endpoint&#x27;]);
        if (errors.length &gt; 0) {
            console.error(&#x27;error validating token_endpoint in discovery document&#x27;, errors);
        }

        errors &#x3D; this.validateUrlFromDiscoveryDocument(doc[&#x27;userinfo_endpoint&#x27;]);
        if (errors.length &gt; 0) {
            console.error(&#x27;error validating userinfo_endpoint in discovery document&#x27;, errors);
            return false;
        }

        errors &#x3D; this.validateUrlFromDiscoveryDocument(doc[&#x27;jwks_uri&#x27;]);
        if (errors.length &gt; 0) {
            console.error(&#x27;error validating jwks_uri in discovery document&#x27;, errors);
            return false;
        }

        return true;
    }

    /**
     * Uses password flow to exchange userName and password for an
     * access_token. After receiving the access_token, this method
     * uses it to query the userinfo endpoint in order to get information
     * about the user in question.
     * 
     * When using this, make sure that the property oidc is set to false.
     * Otherwise stricter validations take happen that makes this operation
     * fail.
     * 
     * @param userName 
     * @param password 
     * @param headers Optional additional http-headers.
     */
    public fetchTokenUsingPasswordFlowAndLoadUserProfile(userName: string, password: string, headers: Headers &#x3D; new Headers()): Promise&lt;object&gt; {
        return this
                .fetchTokenUsingPasswordFlow(userName, password, headers)
                .then(() &#x3D;&gt; this.loadUserProfile());
    }

    /**
     * Loads the user profile by accessing the user info endpoint defined by OpenId Connect.
     * 
     * When using this with OAuth2 password flow, make sure that the property oidc is set to false.
     * Otherwise stricter validations take happen that makes this operation
     * fail.
     */
    public loadUserProfile(): Promise&lt;object&gt; {
        if (!this.hasValidAccessToken()) throw new Error(&quot;Can not load User Profile without access_token&quot;);
        if (!this.validateUrlForHttps(this.userinfoEndpoint)) throw new Error(&#x27;userinfoEndpoint must use Http. Also check property requireHttps.&#x27;);
        
        return new Promise((resolve, reject) &#x3D;&gt; {

            let headers &#x3D; new Headers();
            headers.set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + this.getAccessToken());

            this.http.get(this.userinfoEndpoint, { headers }).map(r &#x3D;&gt; r.json()).subscribe(
                (doc) &#x3D;&gt; {
                    this.debug(&#x27;userinfo received&#x27;, doc);

                    let existingClaims &#x3D; this.getIdentityClaims() || {};
                    if (this.oidc &amp;&amp; (!existingClaims[&#x27;sub&#x27;] || doc.sub !&#x3D; existingClaims[&#x27;sub&#x27;])) {
                        let err &#x3D; &#x27;if property oidc is true, the received user-id (sub) has to be the user-id of the user that has logged in with oidc.\n&#x27;
                                    + &#x27;if you are not using oidc but just oauth2 password flow set oidc to false&#x27;;

                        reject(err);
                        return;
                    }

                    doc &#x3D; Object.assign({}, existingClaims, doc);

                    this._storage.setItem(&#x27;id_token_claims_obj&#x27;, JSON.stringify(doc));
                    this.eventsSubject.next(new OAuthSuccessEvent(&#x27;user_profile_loaded&#x27;));
                    resolve(doc);
                },
                (err) &#x3D;&gt; {
                    console.error(&#x27;error loading user info&#x27;, err);
                    this.eventsSubject.next(new OAuthErrorEvent(&#x27;user_profile_load_error&#x27;, err));
                    reject(err);
                }
            );
        });


    }

    /**
     * Uses password flow to exchange userName and password for an access_token.
     * @param userName 
     * @param password 
     * @param headers Optional additional http-headers.
     */
    public fetchTokenUsingPasswordFlow(userName: string, password: string, headers: Headers &#x3D; new Headers()): Promise&lt;object&gt; {

        if (!this.validateUrlForHttps(this.tokenEndpoint)) throw new Error(&#x27;tokenEndpoint must use Http. Also check property requireHttps.&#x27;);

        return new Promise((resolve, reject) &#x3D;&gt; { 
            let search &#x3D; new URLSearchParams();
            search.set(&#x27;grant_type&#x27;, &#x27;password&#x27;);
            search.set(&#x27;client_id&#x27;, this.clientId);
            search.set(&#x27;scope&#x27;, this.scope);
            search.set(&#x27;username&#x27;, userName);
            search.set(&#x27;password&#x27;, password);
            
            if (this.dummyClientSecret) {
                search.set(&#x27;client_secret&#x27;, this.dummyClientSecret);
            }

            headers.set(&#x27;Content-Type&#x27;, &#x27;application/x-www-form-urlencoded&#x27;);

            let params &#x3D; search.toString();

            this.http.post(this.tokenEndpoint, params, { headers }).map(r &#x3D;&gt; r.json()).subscribe(
                (tokenResponse) &#x3D;&gt; {
                    this.debug(&#x27;tokenResponse&#x27;, tokenResponse);
                    this.storeAccessTokenResponse(tokenResponse.access_token, tokenResponse.refresh_token, tokenResponse.expires_in);

                    this.eventsSubject.next(new OAuthSuccessEvent(&#x27;token_received&#x27;));
                    resolve(tokenResponse);
                },
                (err) &#x3D;&gt; {
                    console.error(&#x27;Error performing password flow&#x27;, err);
                    this.eventsSubject.next(new OAuthErrorEvent(&#x27;token_error&#x27;, err));
                    reject(err);
                }
            );
        });

    }

    /**
     * Refreshes the token using a refresh_token.
     * This does not work for implicit flow, b/c
     * there is no refresh_token in this flow.
     * A solution for this is provided by the
     * method silentRefresh.
     */
    public refreshToken(): Promise&lt;object&gt; {

        if (!this.validateUrlForHttps(this.tokenEndpoint)) throw new Error(&#x27;tokenEndpoint must use Http. Also check property requireHttps.&#x27;);

        return new Promise((resolve, reject) &#x3D;&gt; { 
            let search &#x3D; new URLSearchParams();
            search.set(&#x27;grant_type&#x27;, &#x27;refresh_token&#x27;);
            search.set(&#x27;client_id&#x27;, this.clientId);
            search.set(&#x27;scope&#x27;, this.scope);
            search.set(&#x27;refresh_token&#x27;, this._storage.getItem(&#x27;refresh_token&#x27;));
            
            if (this.dummyClientSecret) {
                search.set(&#x27;client_secret&#x27;, this.dummyClientSecret);
            }

            let headers &#x3D; new Headers();
            headers.set(&#x27;Content-Type&#x27;, &#x27;application/x-www-form-urlencoded&#x27;);

            let params &#x3D; search.toString();

            this.http.post(this.tokenEndpoint, params, { headers }).map(r &#x3D;&gt; r.json()).subscribe(
                (tokenResponse) &#x3D;&gt; {
                    this.debug(&#x27;refresh tokenResponse&#x27;, tokenResponse);
                    this.storeAccessTokenResponse(tokenResponse.access_token, tokenResponse.refresh_token, tokenResponse.expires_in);
                    
                    this.eventsSubject.next(new OAuthSuccessEvent(&#x27;token_received&#x27;));
                    this.eventsSubject.next(new OAuthSuccessEvent(&#x27;token_refreshed&#x27;));
                    resolve(tokenResponse);
                },
                (err) &#x3D;&gt; {
                    console.error(&#x27;Error performing password flow&#x27;, err);
                    this.eventsSubject.next(new OAuthErrorEvent(&#x27;token_refresh_error&#x27;, err));
                    reject(err);
                }
            );
        });
    }

    private removeSilentRefreshEventListener(): void {
        if (this.silentRefreshPostMessageEventListener) {
            window.removeEventListener(&#x27;message&#x27;, this.silentRefreshPostMessageEventListener);
            this.silentRefreshPostMessageEventListener &#x3D; null;
        }
    }

    private setupSilentRefreshEventListener(): void {
        this.removeSilentRefreshEventListener();
        
        this.silentRefreshPostMessageEventListener &#x3D; (e: MessageEvent) &#x3D;&gt; {

            let expectedPrefix &#x3D; &#x27;#&#x27;;

            if (this.silentRefreshMessagePrefix) {
                expectedPrefix +&#x3D; this.silentRefreshMessagePrefix;
            }

            if (!e || !e.data || typeof e.data !&#x3D; &#x27;string&#x27; ) return;
            
            let prefixedMessage: string &#x3D; e.data;

            if (!prefixedMessage.startsWith(expectedPrefix)) return;

            let message &#x3D; &#x27;#&#x27; + prefixedMessage.substr(expectedPrefix.length);

            this.tryLogin({
                customHashFragment: message,
                onLoginError: (err) &#x3D;&gt; {
                    this.eventsSubject.next(new OAuthErrorEvent(&#x27;silent_refresh_error&#x27;, err));
                },
                onTokenReceived: () &#x3D;&gt; {
                    this.eventsSubject.next(new OAuthSuccessEvent(&#x27;silently_refreshed&#x27;));
                }
            });
        }

        window.addEventListener(&#x27;message&#x27;, this.silentRefreshPostMessageEventListener);
    }

    
    /**
     * Performs a silent refresh for implicit flow.
     * Use this method to get a new tokens when/ before 
     * the existing tokens expires.
     */
    public silentRefresh(): Promise&lt;OAuthEvent&gt; {
        
        if (!this.validateUrlForHttps(this.loginUrl)) throw new Error(&#x27;tokenEndpoint must use Http. Also check property requireHttps.&#x27;);

        if (!document) {
            throw new Error(&#x27;silent refresh is not supported on this platform&#x27;);
        } 

        let existingIframe &#x3D; document.getElementById(this.silentRefreshIFrameName);
        if (existingIframe) {
            document.body.removeChild(existingIframe);
        }

        let iframe &#x3D; document.createElement(&#x27;iframe&#x27;);
        iframe.id &#x3D; this.silentRefreshIFrameName;

        this.setupSilentRefreshEventListener();

        let redirectUri &#x3D; this.silentRefreshRedirectUri || this.redirectUri;
        this.createLoginUrl(null, null, redirectUri).then(url &#x3D;&gt; {
            iframe.setAttribute(&#x27;src&#x27;, url);
            iframe.style.visibility &#x3D; &#x27;hidden&#x27;;
            document.body.appendChild(iframe);
        });

        let errors &#x3D; this.events.filter(e &#x3D;&gt; e instanceof OAuthErrorEvent).first();
        let success &#x3D; this.events.filter(e &#x3D;&gt; e.type &#x3D;&#x3D; &#x27;silently_refreshed&#x27;).first();
        let timeout &#x3D; Observable.of(new OAuthErrorEvent(&#x27;silent_refresh_timeout&#x27;, null))
                                .delay(this.siletRefreshTimeout);

        return Observable
                .race([errors, success, timeout])
                .do(e &#x3D;&gt; {
                    if (e.type &#x3D;&#x3D; &#x27;silent_refresh_timeout&#x27;) {
                        this.eventsSubject.next(e);
                    }
                })
                .map(e &#x3D;&gt; {
                    if (e instanceof OAuthErrorEvent) {
                        throw e;
                    }
                    return e;
                })
                .toPromise();
    }
    
    private createLoginUrl(
        state: string &#x3D; &#x27;&#x27;, 
        loginHint: string &#x3D; &#x27;&#x27;,
        customRedirectUri: string &#x3D; &#x27;&#x27;
    ) {
        var that &#x3D; this;

        let redirectUri: string;

        if (customRedirectUri) {
            redirectUri &#x3D; customRedirectUri;
        }
        else {
            redirectUri &#x3D; this.redirectUri;
        }

        return this.createAndSaveNonce().then((nonce: any) &#x3D;&gt; {

            if (state) {
                state &#x3D; nonce + &quot;;&quot; + state;
            }
            else {
                state &#x3D; nonce;   
            }

            if (!this.requestAccessToken &amp;&amp; !this.oidc) {
                throw new Error(&#x27;Either requestAccessToken or oidc or both must be true&#x27;);
            }

            if (this.oidc &amp;&amp; this.requestAccessToken) {
                this.responseType &#x3D; &quot;id_token token&quot;;
            }
            else if (this.oidc &amp;&amp; !this.requestAccessToken) {
                this.responseType &#x3D; &#x27;id_token&#x27;
            }
            else {
                this.responseType &#x3D; &#x27;token&#x27;;
            }

            let seperationChar &#x3D; (that.loginUrl.indexOf(&#x27;?&#x27;) &gt; -1) ? &#x27;&amp;&#x27; : &#x27;?&#x27;;

            let scope &#x3D; that.scope;

            if (this.oidc &amp;&amp; !scope.match(/(^|\s)openid($|\s)/)) {
                scope &#x3D; &#x27;openid &#x27; + scope;
            }

            var url &#x3D; that.loginUrl 
                        + seperationChar
                        + &quot;response_type&#x3D;&quot;
                        + encodeURIComponent(that.responseType)
                        + &quot;&amp;client_id&#x3D;&quot;
                        + encodeURIComponent(that.clientId)
                        + &quot;&amp;state&#x3D;&quot; 
                        + encodeURIComponent(state)
                        + &quot;&amp;redirect_uri&#x3D;&quot; 
                        + encodeURIComponent(redirectUri) 
                        + &quot;&amp;scope&#x3D;&quot; 
                        + encodeURIComponent(scope)
                        + &quot;&amp;login_hint&#x3D;&quot;
                        + encodeURIComponent(loginHint);

            if (that.resource) {
                url +&#x3D; &quot;&amp;resource&#x3D;&quot; + encodeURIComponent(that.resource);
            }
            
            if (that.oidc) {
                url +&#x3D; &quot;&amp;nonce&#x3D;&quot; + encodeURIComponent(nonce);
            }

            if (this.customQueryParams) {
                for(let key of Object.getOwnPropertyNames(this.customQueryParams)) {
                    url +&#x3D; &quot;&amp;&quot; + key + &quot;&#x3D;&quot; + encodeURIComponent(this.customQueryParams[key]);
                }
            }
            
            return url;
        });
    };

    /**
     * Starts the implicit flow and redirects to user to
     * the auth servers login url. 
     * 
     * @param additionalState Optinal state that is passes around. You find this state in the property &#x60;&#x60;state&#x60;&#x60; after &#x60;&#x60;tryLogin&#x60;&#x60; logged in the user.
     * @param loginHint 
     */
    public initImplicitFlow(additionalState &#x3D; &quot;&quot;, loginHint&#x3D;&quot;&quot;): void {
        
        if (!this.validateUrlForHttps(this.loginUrl)) {
            throw new Error(&#x27;loginUrl must use Http. Also check property requireHttps.&#x27;);
        }

        this.createLoginUrl(additionalState, loginHint).then(function (url) {
            location.href &#x3D; url;
        })
        .catch(error &#x3D;&gt; {
            console.error(&quot;Error in initImplicitFlow&quot;);
            console.error(error);
        });
    };
    
    private callOnTokenReceivedIfExists(options: LoginOptions): void {
        var that &#x3D; this;
        if (options.onTokenReceived) {
            var tokenParams &#x3D; { 
                idClaims: that.getIdentityClaims(),
                idToken: that.getIdToken(),
                accessToken: that.getAccessToken(),
                state: that.state
            };
            options.onTokenReceived(tokenParams);
        }
    }

    private storeAccessTokenResponse(accessToken: string, refreshToken: string, expiresIn: number): void {
        this._storage.setItem(&quot;access_token&quot;, accessToken);

        if (expiresIn) {
            var expiresInMilliSeconds &#x3D; expiresIn * 1000;
            var now &#x3D; new Date();
            var expiresAt &#x3D; now.getTime() + expiresInMilliSeconds;
            this._storage.setItem(&quot;expires_at&quot;, &quot;&quot; + expiresAt);
        }

        if (refreshToken) {
            this._storage.setItem(&quot;refresh_token&quot;, refreshToken);
        }
    }

    private receivedFirstToken &#x3D; true;

    /**
     * Checks whether there are tokens in the hash fragment
     * as a result of the implicit flow. These tokens are
     * parsed, validated and used to sign the user in to the
     * current client.
     * 
     * @param options Optinal options.
     */
    public tryLogin(options: LoginOptions &#x3D; null): Promise&lt;void&gt; {
        
        options &#x3D; options || { };
            
        let parts: object;

        if (options.customHashFragment) {
            parts &#x3D; this.urlHelper.getHashFragmentParams(options.customHashFragment);
        }
        else {
            parts &#x3D; this.urlHelper.getHashFragmentParams();
        }

        if (parts[&quot;error&quot;]) {
            this.debug(&#x27;error trying to login&#x27;);
            this.handleLoginError(options, parts);
            let err &#x3D; new OAuthErrorEvent(&#x27;token_error&#x27;, {}, parts);
            this.eventsSubject.next(err);
            return Promise.reject(err);
        }

        var accessToken &#x3D; parts[&quot;access_token&quot;];
        var idToken &#x3D; parts[&quot;id_token&quot;];
        var state &#x3D; decodeURIComponent(parts[&quot;state&quot;]);
        
        if (!this.requestAccessToken &amp;&amp; !this.oidc) {
            return Promise.reject(&#x27;Either requestAccessToken or oidc or both must be true.&#x27;);
        }

        if (this.requestAccessToken &amp;&amp; (!accessToken || !state)) return Promise.resolve();
        if (this.oidc &amp;&amp; !idToken) return Promise.resolve();
        
        var stateParts &#x3D; state.split(&#x27;;&#x27;);
        if (stateParts.length &gt; 1) {
            this.state &#x3D; stateParts[1];
        }
        var nonceInState &#x3D; stateParts[0];


        // Our state might be URL encoded
        // Check for this and then decode it if it is
        // TODO: Check this!
        /*
        let decodedState &#x3D; decodeURIComponent(state);
        if (decodedState !&#x3D; state) {
          state &#x3D; decodedState;
        }
        */
        if (this.requestAccessToken) {
            let success &#x3D; this.validateNonceForAccessToken(accessToken, nonceInState);
            if (!success) {
                let event &#x3D; new OAuthErrorEvent(&#x27;invalid_nonce_in_state&#x27;, null);
                this.eventsSubject.next(event);
                return Promise.reject(event);
            }
            this.storeAccessTokenResponse(accessToken, null, parts[&#x27;expires_in&#x27;]);
        }

        if (!this.oidc) return Promise.resolve();

        return this
                .processIdToken(idToken, accessToken)
                .then(result &#x3D;&gt; {
                    if (options.validationHandler) {
                        return options.validationHandler({
                            accessToken: accessToken,
                            idClaims: result.idTokenClaims,
                            idToken: result.idToken,
                            state: state
                        }).then(_ &#x3D;&gt; result);
                    }
                    return result;
                })
                .then(result &#x3D;&gt; {
                        this.storeIdToken(result);
                        this.eventsSubject.next(new OAuthSuccessEvent(&#x27;token_received&#x27;));
                        this.callOnTokenReceivedIfExists(options);
                        if (this.clearHashAfterLogin) location.hash &#x3D; &#x27;&#x27;;
                    })
                .catch(reason &#x3D;&gt; {
                    this.eventsSubject.next(new OAuthErrorEvent(&#x27;token_validation_error&#x27;, reason));
                    console.error(&#x27;Error validating tokens&#x27;);
                    console.error(reason);
                });
        
    };

    private validateNonceForAccessToken(accessToken: string, nonceInState: string): boolean {
        var savedNonce &#x3D; this._storage.getItem(&quot;nonce&quot;);
        if (savedNonce !&#x3D;&#x3D; nonceInState) {
            let err &#x3D; &#x27;validating access_token failed. wrong state/nonce.&#x27;;
            console.error(err, savedNonce, nonceInState);
            return false;
        }
        return true;
    }

    protected storeIdToken(idToken: ParsedIdToken) {
        this._storage.setItem(&quot;id_token&quot;, idToken.idToken);
        this._storage.setItem(&quot;id_token_claims_obj&quot;, idToken.idTokenClaimsJson);
        this._storage.setItem(&quot;id_token_expires_at&quot;, &quot;&quot; + idToken.idTokenExpiresAt);
    }

    private handleLoginError(options: LoginOptions, parts: object): void {
        var savedNonce &#x3D; this._storage.getItem(&quot;nonce&quot;);
        if (options.onLoginError) 
            options.onLoginError(parts)
        if (this.clearHashAfterLogin) location.hash &#x3D; &#x27;&#x27;;
    }
    

    protected processIdToken(idToken: string, accessToken: string): Promise&lt;ParsedIdToken&gt;  {
            
            let tokenParts &#x3D; idToken.split(&quot;.&quot;);
            let headerBase64 &#x3D; this.padBase64(tokenParts[0]);
            let headerJson &#x3D; atob(headerBase64);
            let header &#x3D; JSON.parse(headerJson);
            let claimsBase64 &#x3D; this.padBase64(tokenParts[1]);
            let claimsJson &#x3D; atob(claimsBase64);
            let claims &#x3D; JSON.parse(claimsJson);
            let savedNonce &#x3D; this._storage.getItem(&quot;nonce&quot;);
            
            if (Array.isArray(claims.aud)) {
                if (claims.aud.every(v &#x3D;&gt; v !&#x3D;&#x3D; this.clientId)) {
                    let err &#x3D; &quot;Wrong audience: &quot; + claims.aud.join(&quot;,&quot;);
                    console.warn(err);
                    return Promise.reject(err);
                }
            } else {
                if (claims.aud !&#x3D;&#x3D; this.clientId) {
                    let err &#x3D; &quot;Wrong audience: &quot; + claims.aud;
                    console.warn(err);
                    return Promise.reject(err);
                }
            }

            if (this.getKeyCount() &gt; 1 &amp;&amp; !claims.kid) {
                let err &#x3D; &#x27;There needs to be a kid claim in the id_token when multiple keys are defined via the property jwks&#x27;;
                console.warn(err);
                return Promise.reject(err);
            }

            if (!claims.sub) {
                let err &#x3D; &quot;No sub claim in id_token&quot;;
                console.warn(err);
                return Promise.reject(err);
            }

            if (!claims.iat) {
                let err &#x3D; &quot;No iat claim in id_token&quot;;
                console.warn(err);
                return Promise.reject(err);
            }

            if (claims.iss !&#x3D;&#x3D; this.issuer) {
                let err &#x3D; &quot;Wrong issuer: &quot; + claims.iss;
                console.warn(err);
                return Promise.reject(err);
            }

            if (claims.nonce !&#x3D;&#x3D; savedNonce) {
                let err &#x3D; &quot;Wrong nonce: &quot; + claims.nonce;
                console.warn(err);
                return Promise.reject(err);
            }

            let now &#x3D; Date.now();
            let issuedAtMSec &#x3D; claims.iat * 1000;
            let expiresAtMSec &#x3D; claims.exp * 1000;
            let tenMinutesInMsec &#x3D; 1000 * 60 * 10;

            if (issuedAtMSec - tenMinutesInMsec &gt;&#x3D; now  || expiresAtMSec + tenMinutesInMsec &lt;&#x3D; now) {
                let err &#x3D; &quot;Token has been expired&quot;;
                console.error(err);
                console.error({
                    now: now,
                    issuedAtMSec: issuedAtMSec,
                    expiresAtMSec: expiresAtMSec
                });
                return Promise.reject(err);
            }

            let validationParams: ValidationParams &#x3D; {
                accessToken: accessToken,
                idToken: idToken,
                jwks: this.jwks,
                idTokenClaims: claims,
                idTokenHeader: header
            };

            if (this.requestAccessToken &amp;&amp; !this.checkAtHash(validationParams)) {
                let err &#x3D; &quot;Wrong at_hash&quot;;
                console.warn(err);
                return Promise.reject(err);
            }

            return this.checkSignature(validationParams).then(_ &#x3D;&gt; {
                let result: ParsedIdToken &#x3D; {
                    idToken: idToken,
                    idTokenClaims: claims,
                    idTokenClaimsJson: claimsJson,
                    idTokenHeader: header,
                    idTokenHeaderJson: headerJson,
                    idTokenExpiresAt: expiresAtMSec,
                };
                return result;
            }) 

    }
    
    /**
     * Returns the received claims about the user.
     */
    public getIdentityClaims(): object {
        var claims &#x3D; this._storage.getItem(&quot;id_token_claims_obj&quot;);
        if (!claims) return null;
        return JSON.parse(claims);
    }
    
    /**
     * Returns the current id_token.
     */
    public getIdToken(): string {
        return this._storage.getItem(&quot;id_token&quot;);
    }
    
    private padBase64(base64data): string {
        while (base64data.length % 4 !&#x3D;&#x3D; 0) {
            base64data +&#x3D; &quot;&#x3D;&quot;;
        }
        return base64data;
    }

    /**
     * Returns the current access_token.
     */
    public getAccessToken(): string {
        return this._storage.getItem(&quot;access_token&quot;);
    };

    /**
     * Returns the expiration date of the access_token
     * as milliseconds since 1970.
     */
    public getAccessTokenExpiration(): number {
        return parseInt(this._storage.getItem(&quot;expires_at&quot;));
    }

    /**
     * Returns the expiration date of the id_token
     * as milliseconds since 1970.
     */
    public getIdTokenExpiration(): number {
        return parseInt(this._storage.getItem(&quot;id_token_expires_at&quot;));
    }

    /**
     * Checkes, whether there is a valid access_token.
    */
    public hasValidAccessToken(): boolean {
        if (this.getAccessToken()) {

            var expiresAt &#x3D; this._storage.getItem(&quot;expires_at&quot;);
            var now &#x3D; new Date();
            if (expiresAt &amp;&amp; parseInt(expiresAt) &lt; now.getTime()) {
                return false;
            }

            return true;
        }

        return false;
    };
    
    /**
     * Checkes, whether there is a valid id_token.
    */
    public hasValidIdToken(): boolean {
        if (this.getIdToken()) {

            var expiresAt &#x3D; this._storage.getItem(&quot;id_token_expires_at&quot;);
            var now &#x3D; new Date();
            if (expiresAt &amp;&amp; parseInt(expiresAt) &lt; now.getTime()) {
                return false;
            }

            return true;
        }

        return false;
    };
    
    /**
     * Returns the auth-header that can be used
     * to transmit the access_token to a service
    */
    public authorizationHeader(): string {
        return &quot;Bearer &quot; + this.getAccessToken();
    }
    
    /**
     * Removes all tokens and logs the user out.
     * If a logout url is configured, the user is 
     * redirected to it.
     * @param noRedirectToLogoutUrl 
     */
    public logOut(noRedirectToLogoutUrl: boolean &#x3D; false): void {
        var id_token &#x3D; this.getIdToken();
        this._storage.removeItem(&quot;access_token&quot;);
        this._storage.removeItem(&quot;id_token&quot;);
        this._storage.removeItem(&quot;refresh_token&quot;);
        this._storage.removeItem(&quot;nonce&quot;);
        this._storage.removeItem(&quot;expires_at&quot;);
        this._storage.removeItem(&quot;id_token_claims_obj&quot;);
        this._storage.removeItem(&quot;id_token_expires_at&quot;);
        
        if (!this.logoutUrl) return;
        if (noRedirectToLogoutUrl) return;
        if (!id_token) return;

        let logoutUrl: string;
        
        if (!this.validateUrlForHttps(this.logoutUrl)) throw new Error(&#x27;logoutUrl must use Http. Also check property requireHttps.&#x27;);

        // For backward compatibility
        if (this.logoutUrl.indexOf(&#x27;{{&#x27;) &gt; -1) {
            logoutUrl &#x3D; this.logoutUrl.replace(/\{\{id_token\}\}/, id_token);
        }
        else {
            logoutUrl &#x3D; this.logoutUrl + &quot;?id_token_hint&#x3D;&quot; 
                                + encodeURIComponent(id_token)
                                + &quot;&amp;post_logout_redirect_uri&#x3D;&quot;
                                + encodeURIComponent(this.postLogoutRedirectUri || this.redirectUri);
        }
        location.href &#x3D; logoutUrl;
    };

    private createAndSaveNonce(): Promise&lt;string&gt; {
        var that &#x3D; this;
        return this.createNonce().then(function (nonce: any) {
            that._storage.setItem(&quot;nonce&quot;, nonce);
            return nonce;
        })
    };

    protected createNonce(): Promise&lt;string&gt; {
        
        return new Promise((resolve, reject) &#x3D;&gt; { 
        
            if (this.rngUrl) {
                throw new Error(&quot;createNonce with rng-web-api has not been implemented so far&quot;);
            }
            else {
                var text &#x3D; &quot;&quot;;
                var possible &#x3D; &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789&quot;;

                for (var i &#x3D; 0; i &lt; 40; i++)
                    text +&#x3D; possible.charAt(Math.floor(Math.random() * possible.length));
                
                resolve(text);
            }
        
        });
    };

    private checkAtHash(params: ValidationParams): boolean {
        
        if (!this.tokenValidationHandler) {
            console.warn(&#x27;No tokenValidationHandler configured. Cannot check at_hash.&#x27;);
            return true;
        }
        return this.tokenValidationHandler.validateAtHash(params);
    }

    private checkSignature(params: ValidationParams): Promise&lt;any&gt; {
        if (!this.tokenValidationHandler) {
            console.warn(&#x27;No tokenValidationHandler configured. Cannot check signature.&#x27;);
            return Promise.resolve(null);
        }
        return this.tokenValidationHandler.validateSignature(params);
    }

}
</code></pre>
    </div>
</div>







                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
           </div>
       </div>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script>var COMPODOC_CURRENT_PAGE_DEPTH = 1;</script>

       <script src="../js/search/search.js"></script>
       <script src="../js/search/lunr.min.js"></script>
       <script src="../js/search/search-lunr.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
       <script src="../js/search/search_index.js"></script>

    </body>
</html>
